<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20th</title> 
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <button id="menuToggleButton" class="menu-toggle-button">☰</button>
    <div class="overlay"></div>

    <nav id="sidebarMenu" class="sidebar-menu">
        <h3>목록</h3>
        <ul id="archiveLinks">
            </ul>
    </nav>

    <div id="mainContentWrapper" class="main-content-wrapper">
        <div class="container">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="현재 페이지 내용에서 검색..." id="searchInput">
            </div>

            <section class="page-specific-content"> 
                <div class="header">
                    <div class="course-title">어떤 스승을 따라야 할까?</div>
                    <div class="course-date">2025년 5월 18일</div> 
                    <div class="course-number"><i>20th</i></div>
                </div>
    
                <div class="question-group">
                    <div class="question-number">본문</div>
                    <div class="verse">
                        <div class="verse-text">
                            3   때가 이르리니 사람이 바른 교훈을 받지 아니하며 귀가 가려워서 자기의 사욕을 따를 스승을 많이 두고
                            4   또 그 귀를 진리에서 돌이켜 허탄한 이야기를 따르리라
                        </div>
                        <div class="verse-reference">디모데후서 4:3-4</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 3-(1)</div>
                    <div class="verse">
                        <div class="verse-text">
                            16   이에 헤롯이 박사들에게 속은 줄 알고 심히 노하여 사람을 보내어 베들레헴과 그 모든 지경 안에 있는 사내아이를 박사들에게 자세히 알아본 그 때를 기준하여 두 살부터 그 아래로 다 죽이니
                        </div>
                        <div class="verse-reference">마태복음 2:16</div>
                    </div>
                    <div class="verse">
                        <div class="verse-text">
                            23   헤롯이 영광을 하나님께로 돌리지 아니하는고로 주의 사자가 곧 치니 충이 먹어 죽으니라
                        </div>
                        <div class="verse-reference">사도행전 12:23</div>
                    </div>
                    <div class="verse">
                        <div class="verse-text">
                            8   헤롯이 예수를 보고 매우 기뻐하니 이는 그의 소문을 들었으므로 보고자 한 지 오래였고 또한 무엇이나 이적 행하심을 볼까 바랐던 연고러라
                            9   여러 말로 물으나 아무 말도 대답하지 아니하시니
                        </div>
                        <div class="verse-reference">누가복음 23:8-9</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 3-(3)</div>
                    <div class="verse">
                        <div class="verse-text">
                            16 너는 네 형제의 아내의 하체를 범하지 말라 이는 네 형제의 하체니라
                        </div>
                        <div class="verse-reference">레위기 18:16</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 3-(4)</div>
                    <div class="verse">
                        <div class="verse-text">
                            4   이는 요한이 헤롯에게 말하되 당신이 그 여자를 차지한 것이 옳지 않다 하였음이라
                        </div>
                        <div class="verse-reference">마태복음 14:4</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 3-(5)</div>
                    <div class="verse">
                        <div class="verse-text">
                            11 내가 진실로 너희에게 말하노니 여자가 낳은 자 중에 세례 요한보다 큰 이가 일어남이 없도다 그러나 천국에서는 극히 작은 자라도 그보다 크니라
                        </div>
                        <div class="verse-reference">마태복음 11:11</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 3-(8)</div>
                    <div class="verse">
                        <div class="verse-text">
                            3 예레미야가 그들에게 대답하되 너희는 시드기야에게 이같이 말하라
                        </div>
                        <div class="verse-reference">예레미야 21:3</div>
                    </div>
                    <div class="verse">
                        <div class="verse-text">
                            6 선지자 예레미야가 이 모든 말씀을 예루살렘에서 유다의 시드기야 왕에게 아뢰니라
                        </div>
                        <div class="verse-reference">예레미야 34:6</div>
                    </div>
                </div>

                <div class="question-group">
                    <div class="question-number">문제 4-(3)</div>
                    <div class="verse">
                        <div class="verse-text">
                            8 내가 여호와를 항상 내 앞에 모심이여 그가 나의 오른쪽에 계시므로 내가 흔들리지 아니하리로다
                        </div>
                        <div class="verse-reference">시편 16:8</div>
                    </div>
                </div>
                </section>
    
            <footer class="footer">
                <p>📚 공과 공부에 도움이 되길 바랍니다 🙏</p>
            </footer>
        </div> 
    </div>

    <script src="menuData.js"></script> 
    <script>
        const menuToggleButton = document.getElementById('menuToggleButton');
        const sidebarMenu = document.getElementById('sidebarMenu');
        const overlay = document.querySelector('.overlay');
        const searchInput = document.getElementById('searchInput');
        const archiveLinksUl = document.getElementById('archiveLinks');

        // 메뉴 생성 (menuData.js의 weeklyBibleStudies 배열 사용)
        if (typeof weeklyBibleStudies !== 'undefined' && weeklyBibleStudies.length > 0) {
            // menuData.js 에 입력된 순서대로 (보통 최신이 위)
            // 또는 여기서 날짜순 정렬 weeklyBibleStudies.sort((a,b) => new Date(b.date) - new Date(a.date));
            
            weeklyBibleStudies.forEach((study, index) => { // index 추가
                const listItem = document.createElement('li');
                const link = document.createElement('a');
                link.href = study.file; 
                link.innerHTML = `<span class="title">${study.title}</span><span class="date">${study.date} - <i>${study.number}</i></span>`;
                
                const currentPath = window.location.pathname;
                const currentFile = currentPath.substring(currentPath.lastIndexOf('/') + 1);

                // index.html 이고, 현재 study가 배열의 첫번째 (최신) 항목이라면 active
                if ((currentFile === '' || currentFile === 'index.html') && index === 0 && weeklyBibleStudies[0].file === 'index.html') { 
                     // menuData.js의 첫번째 항목 file이 'index.html'일 경우 index.html에서 활성화
                    link.classList.add('active-page-link');
                } else if (currentFile === '' && study.file === weeklyBibleStudies[0].file && index === 0) {
                    // index.html로 접속했고, study.file이 최신 파일명과 같으면 (menuData.js의 첫번째 항목)
                     link.classList.add('active-page-link');
                }
                // 또는 현재 파일명이 study.file과 일치하면 active
                else if (currentFile === study.file) {
                    link.classList.add('active-page-link');
                }


                listItem.appendChild(link);
                archiveLinksUl.appendChild(listItem);
            });
        } else {
            archiveLinksUl.innerHTML = '<li>메뉴 데이터가 없습니다.</li>';
        }

        menuToggleButton.addEventListener('click', function() {
            sidebarMenu.classList.toggle('open');
            overlay.classList.toggle('active');
        });

        overlay.addEventListener('click', function() { 
            sidebarMenu.classList.remove('open');
            overlay.classList.remove('active');
        });

        // 검색 기능 (현재 페이지의 .page-specific-content 내부만 검색)
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const questionGroups = document.querySelectorAll('.page-specific-content .question-group');
            
            questionGroups.forEach(group => {
                const groupText = group.textContent.toLowerCase();
                if (groupText.includes(searchTerm)) {
                    group.style.display = 'block'; 
                    group.style.background = searchTerm ? 'linear-gradient(135deg, #fff5e1 0%, #ffeccf 100%)' : 'linear-gradient(135deg, #fdfbf7 0%, #f7f2ec 100%)';
                } else {
                    group.style.display = searchTerm ? 'none' : 'block'; 
                    group.style.background = 'linear-gradient(135deg, #fdfbf7 0%, #f7f2ec 100%)';
                }
            });
        });

        // 기존 구절 클릭 효과
        document.querySelectorAll('.verse').forEach(verse => {
            verse.addEventListener('click', function() {
                this.style.transform = 'scale(1.015)'; 
                setTimeout(() => {
                    this.style.transform = 'scale(1)'; 
                }, 150); 
            });
        });
    </script>
</body>
</html>
